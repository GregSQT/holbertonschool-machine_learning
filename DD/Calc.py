import plotly.express as px
import math
import colorsys

# Data

data = {
    "Warlock Baseline" : [5.9,7.7,7.7,8.3,16.5,16.5,16.5,17.7,17.7,17.7,26.6,26.6,26.6,26.6,26.6,26.6,35.4,35.4,35.4,35.4],

    "Barbarian" : [8.8,11.3,11.3,14.8,30.2,31.1,31.1,33.5,36.9,36.9,36.9,36.9,38.6,38.6,38.6,40.3,44.3,44.3,47.7,55.6],
    "Barbarian - Zealot" : [8.8, 11.3, 15.5, 19.8, 35.9, 37.8, 37.8, 41.2, 44.6, 45.5, 45.5, 46.5, 48.2, 49.2, 49.2, 51.9,55.5, 56.5, 59.9, 69.1],
    "Barbarian - Berserker" : [8.8, 11.3, 17.9,21.4,37.8,38.7,38.7,41.1,48.2,55.3,55.3,55.3,57,57,57,62.9,66.4 ,66.4 ,70.8,80.3],
    "Barbarian - Berseker Sword & Board" : [5.9,8.5,15.1,18.2,28.5,28.5,28.5,30.6,35.7,41.2,41.2,44.1,44.1,44.1,44.1,49.6,53.2,53.2,57.8,67.4],
    "Barbarian - Zealot Sword & Board" : [5.9,8.5,12.7,16.6,26.6,27.6,27.6,30.7,32.5,33.4,33.4,37.2,37.2,38.2,38.2,40.7,44.3,45.3,48.9,57.9],


  	"Bard" : [4.7,4.7,6,6.5,10.1,10.1,14.4,14.6,18.8,20.2,23.2,23.2,28.2,28.2,28.9,28.9,33.9,33.9,33.9,38.9],
    "Bard - Valor CME Abuse" : [4.7,4.7,6.0,6.5,10.4,14.3,16.4,19.9,22.1,28.9,46.6,56.7,56.7,75.1,75.1,91,124.8,124.8,124.8,158.8],
    "Bard - Valor True Strike CME" : [5.9,5.9,5.9,5.4,9.5,9.5,17.9,16.5,19.1,19.1,36.6,42.1,64.4,78.3,78.3,87.6,90.5,125,125,140.2],
    "Bard - Valor Greatsword" : [4.7,4.7,6,6.5,10.1,13.2,14.6,15.9,22.6,22.6,30.6,36.1,41.3,47.2,47.2,53.7,56.9,66.9,66.9,74.5],

    "Druid" : [3.2,3.2,4.7,4.7,9.5,9.5,14.5,15,20.2,20.2,26.6,26.6,28.3,28.3,34.2,34.2,47.2,47.2,58.1,63.2],
    "Druid - Moon" : [3.2,3.2,11.5,10.8,14.4,17.1,22.5,20.4,24,26.9,29.5,40,37.7,45.6,54.1,54.1,66.4,72.5,83.7,84.5],

    "Fighter - Sword & Board" : [5.9,6.6,6.6,8.9,16.2,17.7,17.7,20.7,20.7,20.7,29.7,29.7,31.1,31.1,31.1,31.1,34.2,34.2,40.9,55.2],
    "Fighter - Greatsword" : [7.8,8.8,8.8,9.7,19.4,24.3,24.3,28.2,29.4,29.4,43.3,43.3,48.4,48.4,48.4,48.4,55.7,55.7,60.9,81.3],
    "Fighter - Champion" : [5.9,6.7,7.1,14,25.1,27,27,30.6,30.6,36,53.2,53.2,54,54,56.2,56.2,63.5,63.5,74.4,83.3],
    "Fighter - Battle Master Sword & Board" : [5.9,6.6,9,11.4,18.7,20.2,20,23.1,23.1,23.2,32.2,32.2,33.6,33.6,38.2,38.2,41.3,41.6,48.3,62.6],

    "Monk" : [8.6,10.2,11,15.6,24.4,24.7,24.7,27.1,27.1,33.2,37.8,37.8,37.8,37.8,37.8,37.8,41.8,41.8,53,65.7],
    "Monk - Shadow" : [8.6,10.2,14.3,20.5,33.3,34.8,35.8,39.1,39.1,47.9,53.8,53.8,53.8,53.8,53.8,53.8,59.7,59.7,59.7,73.2],

    "Paladin" : [8.5,9.2,9.2,11.9,24.7,24.7,25.7,27.8,30.4,30.4,36.5,36.5,39.2,39.2,39.2,39.2,40.4,40.4,50.6,50.6],
    "Paladin - Vengeance" : [8.5,9.2,12.8,15.4,32.4,32.4,33.5,35.5,38.6,38.6,49.3,49.3,52.5,52.5,66.8,66.8,70.4,70.4,80.6,80.6],
    "Paladin - Sword & Board" : [6.1,7.9,10,12.8,24.2,24.2,25.3,27.2,28.7,28.7,40.4,40.4,41.9,41.9,50.2,50.2,52.2,52.2,62.2,62.2],
    "Paladin - Two Weapon Fighting" : [9.1,11.1,14.5,22.2,32,32,32,35.1,35.1,35.1,52.7,52.7,52.7,52.7,61.7,61.7,61.7,61.7,69.5,69.5],

    "Ranger - Two Weapon Fighting" : [12.1,14.3,14.3,15.6,24.7,24.7,24.7,27,27,27,27,27,27,28.7,28.7,28.7,32.4,32.4,38.7,44.4],
    "Ranger - Summon Fey TWF" : [12.1,14.3,14.3,15.6,24.7,24.7,24.7,27,27,27,27,27,29.6,31.3,33.9,37.2,43.3,43.3,47.8,47.8],
    "Ranger - Fey Wanderer" : [12.1,14.3,16.7,18,27.3,27.3,27.3,29.6,29.6,29.6,33.5,33.5,35.6,37.3,39.3,42.9,50.2,50.2,54.9,59.2],
    "Ranger - Longbow" : [7.3,8.4,8.4,9.1,18.7,18.7,18.7,21.4,23.4,23.4,23.4,26.4,29.1,29.6,30.6,30.8,40.5,40.5,46,50],
    "Ranger - Beast Master Longbow" : [7.3,8.4,12.4,12.6,20.9,20.9,20.9,23.3,25.3,25.3,31.1,34,36.7,37.2,38.2,40.3,49.1,49.1,53.3,56.2],

    #"Rogue - 2014" : [6.4,7.7,12.4,12.8,15.8,15.8,19.9,19.8,22.8,25.1,28.3,31,34.4,34.4,36.9,37.2,41.1,41.1,44.8,44.8],
    "Rogue - True Strike" : [7,8.5,14,14.2,20.8,20.8,24,24.9,28.2,28.2,34.8,34.8,38,38,41.4,41.4,48,48,59.7,59.7],
    "Rogue - Dagger Thrower" : [8.2,9.4,13.9,14.8,18.4,18.4,22.1,22.9,26.6,26.6,30.3,30.3,33.9,33.9,37.6,37.6,41.3,41.3,48.3,48.3],
    "Rogue - Assassin" : [6.3,8.9,10.4,16.1,20.1,24.5,24.8,28.6,29.5,33.4,40.8,44.6,46.7,49.5,49.7,53.5,58.1,71.1,71.4,82.6],

    "Warlock" : [5.9,7.7,7.7,8.3,16.5,16.5,16.5,17.7,17.7,17.7,26.6,26.6,26.6,26.6,26.6,26.6,50.8,50.8,57.8,57.8],
    "Warlock - Archfey" : [5.9,8.2,8.7,9.9,18.8,19.9,19,20.7,21.1,22.1,38,38.1,39.4,39.5,39.6,39.7,58.9,59,67.5,67.5],
    "Warlock - True Strike" : [5.9,5.9,7.7,7.1,11.9,16.6,16.6,16.9,19,22.4,25.4,28.9,33.5,33.5,33.5,33.5,38.2,54.3,54.3,61.3],
    "Warlock - PotB Two-Handed" : [6.3,8.6,8.6,9.2,21.1,21.1,21.8,23,26.9,26.9,30.9,41,41,41,41,41,58.4,58.4,64.8,64.8],
    "Warlock - PotB Fiend" : [4.9,9.8,9.8,9.3,13.1,24.3,24.3,24,27,30.9,30.9,34.9,57.1,57.1,57.1,57.1,58.9,78.1,78.1,84.9],
    "Warlock - PotB Fiend Strength" : [7.6,9.8,9.8,9.3,12.9,28.6,28.6,27.8,31.7,35.6,35.6,39.6,57.1,57.1,57.1,57.1,58.9,78.1,78.1,84.9],
}

# Colours

phi = ( 1 + math.sqrt(5) ) / 2
def hsv2hex(h,s,v):
    rgb = tuple(round(i * 255) for i in colorsys.hsv_to_rgb(h,s,v))
    return "#"+"".join([format(i, '02x') for i in rgb])

colors = [hsv2hex((phi*i)%1,(phi*i +0.33)%1/2+0.5,(phi*i+0.66)%1/4+0.75) for i in range(len(data))]

# Plot

fig = px.line(data,
              markers=True,
              height=1000,
              labels=dict(index="Level", value="DPR", variable="Build"),
              template="plotly_dark",
              color_discrete_sequence=colors,
              title="All Classes DPR")

fig.update_traces(hovertemplate='%{y:.1f}')

fig.update_layout(xaxis = dict(tickmode = 'array',
                               tickvals = [i for i in range(20)],
                               ticktext = [i+1 for i in range(20)]),
                  hoverlabel=dict(bgcolor='rgba(0,0,0,0.7)',
                                  font=dict(color='white'),
                                  bordercolor="rgba(0,0,0,0.7)"),
                  hoverdistance=1200

                 ,hovermode='x'
                )